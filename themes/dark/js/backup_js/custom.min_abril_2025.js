const rndInt=randomIntFromInterval(1,2),body=document.querySelector("body"),masking=document.querySelector(".excerp_article_image_bg"),contextualNav=document.querySelector(".contextual_nav"),colorScheme=document.querySelector(".my_schema"),mywhishlist=document.querySelector("#wishlist"),myWhishlistCounter=document.querySelectorAll(".mylist_counter"),search=document.querySelector("#searcher"),openSearch=document.querySelectorAll("#open_searcher"),closeSearch=document.querySelector("#close_searcher"),hype=document.querySelectorAll(".hype_rating_hide"),buttonsGrid=document.querySelectorAll(".article_grid_list .article_buttons .button"),randomWords=["¿De qué va esto?","Quiero saber más","¡Adelante!","Tiene buena pinta","Continuar leyendo"],platform=document.querySelectorAll(".article_platform"),rating=document.querySelectorAll(".my_rating"),ratingUsersComment=document.querySelectorAll(".comment_rating_display"),ratingUsersAverage=document.querySelector(".article_users_rating_average"),articleNext=document.querySelectorAll(".article_next a"),hypeSwipper=document.querySelectorAll(".swiper-slide_hype_number"),allSliders=document.querySelectorAll(".swiper"),cards=document.querySelectorAll(".article_list"),trans=document.querySelector(".transition"),highlighted=document.querySelector(".highlighted"),maskHighlighted=document.querySelector(".mask_highlighted"),videoHighlighted=document.querySelectorAll(".video_highlighted");console.log("nuevo mundo");let mypage="";function getmypage(){return mypage=document.getElementById("wishlist")||document.body.classList.contains("dark")?"pageDark":"pageLight"}function randomIntFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}document.addEventListener("DOMContentLoaded",getmypage),window.addEventListener("scroll",function(e){const t=this.window.scrollY;t>100?contextualNav.classList.add("contextual_nav-visible"):t<100&&contextualNav.classList.contains("contextual_nav-visible")&&contextualNav.classList.remove("contextual_nav-visible")}),buttonsGrid.forEach(e=>{e.firstChild.textContent=randomWords[Math.floor(Math.random()*randomWords.length)]});const pageAccessedByReload=window.performance.navigation&&1===window.performance.navigation.type||window.performance.getEntriesByType("navigation").map(e=>e.type).includes("reload"),urlList=document.querySelector(".item_nav_lista");let urlListValue=randomIntFromInterval(1,1e3);if(urlList.href=urlList.href+"&q="+urlListValue,pageAccessedByReload&&document.getElementById("wishlist")){let e=randomIntFromInterval(1,1e3);urlList.href=urlList.href+"&r="+e,window.location.replace(urlList.href)}function addRatingAverage(){const e=document.createElement("img");let t=ratingUsersAverage.innerText.toLowerCase().trim();"sin valoraciones"!=t&&(ratingUsersAverage.parentNode.classList.remove("rating_lectores"),ratingPasarANumero=parseFloat(t),ratingUsersAverage.prepend(e),e.width=116,e.height=24,e.alt=`La valoración media de los usuarios es de ${t} estrellas`,1===ratingPasarANumero?e.src="https://darkblobcine.com/images/rating/1_stars_green.svg":ratingPasarANumero>=1&&ratingPasarANumero<=1.5?e.src="https://darkblobcine.com/images/rating/1_5_stars_green.svg":ratingPasarANumero>1.5&&ratingPasarANumero<=2?e.src="https://darkblobcine.com/images/rating/2_stars_green.svg":ratingPasarANumero>2&&ratingPasarANumero<=2.5?e.src="https://darkblobcine.com/images/rating/2_5_stars_green.svg":ratingPasarANumero>2.5&&ratingPasarANumero<=3?e.src="https://darkblobcine.com/images/rating/3_stars_green.svg":ratingPasarANumero>3&&ratingPasarANumero<=3.5?e.src="https://darkblobcine.com/images/rating/3_5_stars_green.svg":ratingPasarANumero>3.5&&ratingPasarANumero<=4?e.src="https://darkblobcine.com/images/rating/4_stars_green.svg":ratingPasarANumero>4&&ratingPasarANumero<=4.5?e.src="https://darkblobcine.com/images/rating/4_5_stars_green.svg":ratingPasarANumero>4.5&&ratingPasarANumero<=5&&(e.src="https://darkblobcine.com/images/rating/5_stars_green.svg"))}if(colorScheme&&colorScheme.textContent.includes("dark")&&body.classList.add("dark"),openSearch.forEach(e=>{e.addEventListener("click",e=>{search.style.display="block",search.style.opacity="1",body.classList.add("opened_searcher")})}),closeSearch.addEventListener("click",e=>{search.style.display="none",search.style.opacity="0",body.classList.remove("opened_searcher")}),hype.forEach(e=>{switch(e.textContent){case"1":e.nextElementSibling.classList.add("hype_frozen");break;case"2":e.nextElementSibling.classList.add("hype_warm");break;case"3":e.nextElementSibling.classList.add("hype_excited");break;case"4":e.nextElementSibling.classList.add("hype_mindBlown")}}),rating.forEach(e=>{let t=e.parentElement,r=e.textContent;const a=document.createElement("img");!function(){t.prepend(a),a.width=116,a.height=24;let e=r.toString(),o=e.replace(".","_");a.alt=`Hemos valorado la película con ${e} estrellas`,"article_rating"!=t.classList.value&&"excerp_article_body_recomendado"!=t.parentElement.parentElement.classList.value?a.src=`https://darkblobcine.com/images/rating/${o}_stars_blue.svg`:a.src=`https://darkblobcine.com/images/rating/${o}_stars.svg`,"excerp_article_body_recomendado"==t.parentElement.parentElement.classList.value&&(a.src=`https://darkblobcine.com/images/rating/${o}_stars_blue.svg`)}()}),ratingUsersComment.forEach(e=>{let t=e.textContent,r=document.createElement("img");"0"===t||(e.append(r),r.width=86,r.height=18,r.src=`https://darkblobcine.com/images/rating/${t}_stars_white.svg`)}),ratingUsersAverage&&addRatingAverage(),platform.forEach(e=>{mypageschema=getmypage();let t=e.textContent;const r=document.createElement("div"),a=document.createElement("a"),o=document.createElement("img");function i(t,i,n){if(t&&(e.after(a),a.href=`https://darkblobcine.com/index.php?s=category&c=${t}`,a.append(o),"pageDark"==mypageschema?o.src=`https://darkblobcine.com/images/plataformas/${i}_dark.png`:o.src=`https://darkblobcine.com/images/plataformas/${i}.png`,o.classList.add("img_platform"),o.height=46,o.alt=`Película vista en ${t}`),"review"===n){r.classList.add("badge","review");let e="Reseña";r.innerText=e}else if("noticia"===n){r.classList.add("badge","noticia");let e="Noticia";r.innerText=e}else if("top"===n){r.classList.add("badge","top");let e="TOP 5";r.innerText=e}}switch(t){case"Prime":i("prime","prime","review"),e.after(r);break;case"Netflix":i("netflix","netflix","review"),e.after(r);break;case"Disney":i("disney","disney","review"),e.after(r);break;case"Hbo":i("hbo","hbo","review"),e.after(r);break;case"Filmin":i("filmin","filmin","review"),e.after(r);break;case"Planet horror":i("planet-horror","phorror","review"),e.after(r);break;case"Movistar +":i("movistar","movistar","review"),e.after(r);break;case"Cine":i("cine","cine","review"),e.after(r);break;case"Preestreno":i("preestreno","preestreno","review"),e.after(r);break;case"Noticia":i("","","noticia"),e.after(r);break;case"Top":i("","","top"),e.after(r)}}),articleNext&&articleNext.forEach(e=>{e.href==window.location.href&&(e.style.display="none")}),allSliders.length>0){const e=new Swiper(".swiper-1",{direction:"horizontal",slidesPerView:2.25,spaceBetween:8,freeMode:!0,keyboard:{enabled:!0,onlyInViewport:!1},breakpoints:{1240:{slidesPerView:6,slidesPerGroup:6,spaceBetween:16,freeMode:!1},900:{slidesPerView:4,slidesPerGroup:4,spaceBetween:8,freeMode:!1},660:{slidesPerView:3,slidesPerGroup:3,spaceBetween:8,freeMode:!1}},navigation:{nextEl:".arrow_right_1",prevEl:".arrow_left_1"}}),t=new Swiper(".swiper-2",{direction:"horizontal",slidesPerView:2.25,spaceBetween:8,freeMode:!0,keyboard:{enabled:!0,onlyInViewport:!1},breakpoints:{1240:{slidesPerView:6,slidesPerGroup:6,spaceBetween:16,freeMode:!1},900:{slidesPerView:4,slidesPerGroup:4,spaceBetween:8,freeMode:!1},660:{slidesPerView:3,slidesPerGroup:3,spaceBetween:8,freeMode:!1}},navigation:{nextEl:".arrow_right_2",prevEl:".arrow_left_2"}});function arrowsSlider(e,t){let r=document.querySelector(`.arrow_left_${t}`),a=document.querySelector(`.arrow_right_${t}`);e.on("activeIndexChange",function(){0!=e.activeIndex&&(r.style.opacity="1",r.style.pointerEvents="auto")}),e.on("reachBeginning",function(){a.style.opacity="1",a.style.pointerEvents="auto",r.style.opacity="0.3",r.style.pointerEvents="none"}),e.on("reachEnd",function(){a.style.opacity="0.3",a.style.pointerEvents="none",r.style.opacity="1",r.style.pointerEvents="auto"})}arrowsSlider(e,"1"),arrowsSlider(t,"2"),hypeSwipper.forEach(e=>{let t=e.parentElement,r=e.textContent,a=document.createElement("img"),o=document.createElement("span");a.width=24,a.height=24,function(){switch(r){case"1":a.src="https://darkblobcine.com/images/hype/frozen_swiper.svg",a.alt="Nivel de hype frío (frozen)",t.prepend(a),t.append(o),o.innerText="freezy!",o.style.color="#85A5F8";break;case"2":a.src="https://darkblobcine.com/images/hype/warm_swiper.svg",a.alt="Nivel de hype templado (warm)",t.prepend(a),t.append(o),o.innerText="warm!",o.style.color="#65F8D4";break;case"3":a.src="https://darkblobcine.com/images/hype/excited_swiper.svg",a.alt="Nivel de hype caliente (hot)",t.prepend(a),t.append(o),o.innerText="hot!",o.style.color="#FCA573";break;case"4":a.src="https://darkblobcine.com/images/hype/mind_blown_swiper.svg",a.alt="Nivel de hype me explota la cabeza (boom)",t.prepend(a),t.append(o),o.innerText="booom!",o.style.color="#E24344"}}()})}const observer=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,r=t.querySelector(".hype_rating"),a=t.querySelector(".videoHighlighted_contenedor"),o=t.querySelector(".video_highlighted");if(e.isIntersecting&&(r&&(r.classList.contains("hype_frozen")?r.classList.add("hype_frozen-animation"):r.classList.contains("hype_warm")?r.classList.add("hype_warm-animation"):r.classList.contains("hype_excited")?r.classList.add("hype_excited-animation"):r.classList.contains("hype_mindBlown")&&r.classList.add("hype_mindBlown-animation")),o)){let e=o.duration,t=e-1;getComputedStyle(a).getPropertyValue("--videoLenght");a.style.setProperty("--videoLenght",e-2),a.style.zIndex="2",a.style.opacity="1",o.play();var i=function(){var e=!1;return function(){e||(e=!0,a.style.zIndex="1",a.style.opacity="0")}}();o.addEventListener("timeupdate",e=>{o.currentTime>t&&i()}),o.addEventListener("ended",e=>{o.pause(),o.currentTime=0})}})},{threshold:.85});cards.forEach(e=>{observer.observe(e)});const observer_recommended=new IntersectionObserver(e=>{for(const t of e){if(t.isIntersecting){let e=document.querySelector(".highlighted_content_contenedor"),t=document.querySelector(".highlighted_image img");e.classList.add("highlighted_content_contenedor-visible"),t.style.opacity="1"}}},{rootMargin:"0px 0px -40% 0px"});function labnolIframe(e){var t=document.createElement("iframe");t.setAttribute("src","https://www.youtube.com/embed/"+e.dataset.id+"?autoplay=1"),t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","1"),t.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),e.parentNode.replaceChild(t,e)}function initYouTubeVideos(){for(var e=document.querySelectorAll(".youtube-player"),t=0;t<e.length;t++){var r=e[t].dataset.id,a=document.createElement("div");a.setAttribute("data-id",r);var o=document.createElement("img");o.src="//i.ytimg.com/vi/ID/hq720.jpg".replace("ID",r),a.appendChild(o);var i=document.createElement("div");i.setAttribute("class","play"),a.appendChild(i),a.onclick=function(){labnolIframe(this)},e[t].appendChild(a)}}highlighted&&observer_recommended.observe(highlighted),document.addEventListener("DOMContentLoaded",initYouTubeVideos);let lottieitems=document.querySelectorAll(".lottie_player");const lottieURL="https://darkblobcine.com/themes/dark/animations/addList.json";let fromCookiesToLottie=getCookie("mymovies");function getCookie(e){const t=e+"=";let r;return decodeURIComponent(document.cookie).split("; ").forEach(e=>{0===e.indexOf(t)&&(r=e.substring(t.length))}),r}function getCoockieArrayMovies(){let e;return-1==document.cookie.indexOf("mymovies=")?"":e=getCookie("mymovies").split(",")}void 0!==fromCookiesToLottie&&(fromCookiesToLottie=fromCookiesToLottie.split(",")),document.addEventListener("DOMContentLoaded",function(){let e=lottieitems.length;for(var t=0;t<e;t++)lottieitems[t].load(lottieURL),void 0!==fromCookiesToLottie&&fromCookiesToLottie.forEach(e=>{e==lottieitems[t].getAttribute("data-id")&&(lottieitems[t].setAttribute("data-state","1"),lottieitems[t].play())})});let arrayMovies=getCoockieArrayMovies();function addCounter(){let e=arrayMovies.toString();if(e.length>0){let t=e.split(",").length;t>=0&&myWhishlistCounter.forEach(e=>{e.style.display="flex",e.innerText=t})}else"0"==e.length&&myWhishlistCounter.forEach(e=>{e.style.display="none",e.innerText=""})}function addList(e,t){return t=e.getAttribute("data-id"),arrayMovies=0!=arrayMovies.length?(arrayMovies=[...arrayMovies,t]).toString():(arrayMovies=t).toString()}function arrayRemove(e,t){return e.filter(function(e){return e!=t})}function removeList(e,t){return arrayMovies=(arrayMovies=arrayMovies.filter(e=>e!==t)).toString()}document.addEventListener("DOMContentLoaded",addCounter),lottieitems.forEach((e,t)=>{e.addEventListener("click",t=>{let r=e.getAttribute("data-state"),a=e.getAttribute("data-id");0==r?(e.setAttribute("data-state","1"),e.setDirection(1),e.play(),addList(e,a),addCounter(),document.cookie="mymovies="+arrayMovies,arrayMovies=getCoockieArrayMovies()):(e.setAttribute("data-state","0"),e.setDirection(-1),e.play(),removeList(e,a),addCounter(),0!=arrayMovies.length?document.cookie="mymovies="+arrayMovies:document.cookie="mymovies= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",arrayMovies=getCoockieArrayMovies())})});