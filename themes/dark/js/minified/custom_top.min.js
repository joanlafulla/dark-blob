const body=document.querySelector("body"),contextualNav=document.querySelector(".contextual_nav"),colorScheme=document.querySelector(".my_schema"),search=document.querySelector("#searcher"),openSearch=document.querySelectorAll("#open_searcher"),closeSearch=document.querySelector("#close_searcher"),openTopTrailer=document.querySelectorAll(".open_top_trailer"),topTrailer=document.querySelector(".top_trailer"),closeTopTrailer=document.querySelector(".closing_top_trailer"),topYoutubePlayer=document.querySelector(".top-youtube-player"),ratingUsersComment=document.querySelectorAll(".comment_rating_display"),ratingUsersAverage=document.querySelector(".article_users_rating_average"),articleNext=document.querySelectorAll(".article_next a"),cards=document.querySelectorAll(".article_list"),trans=document.querySelector(".transition"),topContenedor=document.querySelectorAll(".top_contenedor"),topLogo=document.querySelector("svg.top_logo"),topGoBack=document.querySelector(".material-icons.top_goback"),topLogoMobile=document.querySelector("svg.top_logo_mobile"),topMain=document.querySelector("main"),topHeader=document.querySelector("header"),comments=document.querySelector(".top_comments_footer");function preload_image(e){(new Image).src=e}topMain.addEventListener("scroll",()=>{topMain.scrollTop>window.innerHeight/2&&topMain.scrollTop<window.innerHeight-window.innerHeight/4&&(topLogo.style.fill="#272934",topLogoMobile.style.fill="#272934",topGoBack.style.color="#272934")}),topContenedor.forEach(e=>{preload_image("https://res.cloudinary.com/"+e.dataset.background)});const ab=function(e,t,r){window.addEventListener("resize",()=>{const o=window.innerWidth;e=o>=1280?"calc(100vw / 3)":o<1280&&o>720?"calc(100vw / 2)":"calc(100vw - (100vw / 4))","left"===r?"calc(100vw / 3)"===e?(t.style.left="6rem",t.style.bottom="6rem"):"calc(100vw / 2)"===e?(t.style.left="3rem",t.style.bottom="3rem"):"calc(100vw - (100vw / 4))"===e&&(t.style.left="1rem",t.style.bottom="2rem"):"calc(100vw / 3)"===e?(t.style.right="6rem",t.style.bottom="6rem"):"calc(100vw / 2)"===e?(t.style.right="3rem",t.style.bottom="3rem"):"calc(100vw - (100vw / 4))"===e&&(t.style.right="1rem",t.style.bottom="2rem")})},observer=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;if(e.isIntersecting&&t){const e=t.children.item(1);let r=window.getComputedStyle(e).getPropertyValue("--width_top_item");topContentPosition=t.dataset.position,topColor=t.dataset.color,t.firstElementChild.style.animation="bigHero 10s ease-out 1 forwards","left"===topContentPosition?(e.style.visibility="visible",e.style.opacity="1","calc(100vw / 3)"===r?(e.style.left="6rem",e.style.bottom="6rem"):"calc(100vw / 2)"===r?(e.style.left="3rem",e.style.bottom="3rem"):"calc(100vw - (100vw / 4))"===r&&(e.style.left="1rem",e.style.bottom="2rem")):(e.style.visibility="visible",e.style.opacity="1","calc(100vw / 3)"===r?(e.style.right="6rem",e.style.bottom="6rem"):"calc(100vw / 2)"===r?(e.style.right="3rem",e.style.bottom="3rem"):"calc(100vw - (100vw / 4))"===r&&(e.style.right="1rem",e.style.bottom="2rem")),"black"===topColor?(topHeader.style.opacity="1",topLogo.style.fill="#F8F3E5",topLogoMobile.style.fill="#F8F3E5",topGoBack.style.color="#F8F3E5"):(topHeader.style.opacity="1",topLogo.style.fill="#272934",topLogoMobile.style.fill="#272934",topGoBack.style.color="#272934"),ab(r,e,topContentPosition)}})},{threshold:.85});topContenedor.forEach(e=>{observer.observe(e)});const observerComments=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;e.isIntersecting&&t&&(topHeader.style.opacity="0")})},{threshold:.1});function labnolIframe(e){var t=document.createElement("iframe");t.setAttribute("src","https://www.youtube.com/embed/"+e.dataset.id+"?autoplay=1"),t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","1"),t.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),e.parentNode.replaceChild(t,e)}function initYouTubeVideos(){for(var e=document.querySelectorAll(".youtube-player"),t=0;t<e.length;t++){var r=e[t].dataset.id,o=document.createElement("div");o.setAttribute("data-id",r);var a=document.createElement("img");a.src="//i.ytimg.com/vi/ID/hq720.jpg".replace("ID",r),o.appendChild(a);var s=document.createElement("div");s.setAttribute("class","play"),o.appendChild(s),o.onclick=function(){labnolIframe(this)},e[t].appendChild(o)}}function removeAllChildNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function addRatingAverage(){const e=document.createElement("img");let t=ratingUsersAverage.innerText.toLowerCase().trim();"sin valoraciones"!=t&&(ratingUsersAverage.parentNode.classList.remove("rating_lectores"),ratingPasarANumero=parseFloat(t),ratingUsersAverage.prepend(e),e.width=116,e.height=24,e.alt=`La valoraciÃ³n media de los usuarios es de ${t} estrellas`,1===ratingPasarANumero?e.src="https://darkblobcine.com/images/rating/1_stars_green.svg":ratingPasarANumero>=1&&ratingPasarANumero<=1.5?e.src="https://darkblobcine.com/images/rating/1_5_stars_green.svg":ratingPasarANumero>1.5&&ratingPasarANumero<=2?e.src="https://darkblobcine.com/images/rating/2_stars_green.svg":ratingPasarANumero>2&&ratingPasarANumero<=2.5?e.src="https://darkblobcine.com/images/rating/2_5_stars_green.svg":ratingPasarANumero>2.5&&ratingPasarANumero<=3?e.src="https://darkblobcine.com/images/rating/3_stars_green.svg":ratingPasarANumero>3&&ratingPasarANumero<=3.5?e.src="https://darkblobcine.com/images/rating/3_5_stars_green.svg":ratingPasarANumero>3.5&&ratingPasarANumero<=4?e.src="https://darkblobcine.com/images/rating/4_stars_green.svg":ratingPasarANumero>4&&ratingPasarANumero<=4.5?e.src="https://darkblobcine.com/images/rating/4_5_stars_green.svg":ratingPasarANumero>4.5&&ratingPasarANumero<=5&&(e.src="https://darkblobcine.com/images/rating/5_stars_green.svg"))}observerComments.observe(comments),openSearch.forEach(e=>{e.addEventListener("click",e=>{search.style.display="block",search.style.opacity="1",body.classList.add("opened_searcher")})}),closeSearch.addEventListener("click",e=>{search.style.display="none",search.style.opacity="0",body.classList.remove("opened_searcher")}),openTopTrailer.forEach(e=>{e.addEventListener("click",t=>{const r=e.dataset.trailer;topYoutubePlayer.dataset.id=r,topTrailer.style.visibility="visible",topTrailer.style.opacity="1",body.classList.add("opened_top_trailer"),initYouTubeVideos()})}),closeTopTrailer.addEventListener("click",e=>{topTrailer.style.visibility="hidden",topTrailer.style.opacity="0",body.classList.remove("opened_top_trailer"),removeAllChildNodes(topYoutubePlayer)}),ratingUsersComment.forEach(e=>{let t=e.textContent,r=document.createElement("img");"0"===t||(e.append(r),r.width=86,r.height=18,r.src=`https://darkblobcine.com/images/rating/${t}_stars_white.svg`)}),ratingUsersAverage&&addRatingAverage(),articleNext&&articleNext.forEach(e=>{e.href==window.location.href&&(e.style.display="none")});